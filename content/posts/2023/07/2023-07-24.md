+++
author = "aries"
categories = ["tech"]
tags = ["hugo", "ssg", "cms"]
date = "2023-07-24"
description = ""
#featured = ""
#featuredalt = ""
featuredpath = "date"
linktitle = ""
title = "Hugo本体のアプデに追従できないって話"
type = "post"
toc=true
+++

自分の無能さへの嘆きと愚痴が主な記事です。

長文になるのとMastodonで書いてもまとまんねーしなーと思って書き始めた次第。(この記事がまとまっているとは言っていない)

### 結論

このままバージョン固定してHugo使い続けるか、あるいは構成考えてWPかなにかに移るか迷う～～

今思いついてる選択肢
- バージョン固定して使い続ける
- がんばってテーマをHugoのアプデに追従する
- はてなブログPro
- WPホスティングサービス(Shifterが良さそうだけど個人用途だとちょい高いかな)
- WPセルフホストしてStaticPressとかのWP静的サイト化プラグインを使って、管理用は書きたい時にすぐ書けるけど常時起動ではないVPSとかにしつつWP特有のしんどい運用を緩和)

#### 固定した時のメリット・デメリット

- 楽で安い
- おもしろくない
- 古いHugoバイナリやArchivedされたテーマリポジトリが消されたりすると今のAmplifyを使ったやり方じゃビルドと公開ができない
- 記事増えてきて管理無理じゃねと思えてきた

#### 他プラットフォームに移るメリット・デメリット

- 記事と画像の移行コストが高そう
- リアルマネー固定費が増える(現状が静的サイトな為超安い)
- そこそこ運用に時間かけることになる？
- セルフホストするならちょっと楽しげなインフラを個人で考えられる
- が、検証しながらになるから大分疲れそう
- 選ぶものによっては過去記事のURL引き継げない可能性
  - 例えば今は https://blog.asterism.xyz/year-month-day/
  - はてなブログだとカスタムURLは domain/entry/<文字列> しかできないっぽい？

### 駄文

このブログで使っているHugoというSSG(静的サイトジェネレーター)は本体の更新がかなり活発で、体感1ヶ月くらいGitHub開かない日が続くと通知がHugoのリリースで埋まるくらい。

んで、開発が活発なのはとても良いことなのだけれど、まだ正式リリースじゃないっていうのとコミュニティの方針？か何かもあるのかかなり破壊的変更が多い。めちゃくちゃに多い。

破壊的変更が多いと何が困るかっていうと、Hugoテーマ開発者だってずっと維持できる訳では無い以上、最新版じゃビルドできなくなったHugoテーマの廃墟が大量にできる。

そうなった時困るのが私のようなフロントもなんも分からんのにコスト都合かあるいはカッコつけてか、SSGでサイト運営する技術的弱者。

要するにテーマ側の更新が望めない以上、Hugo側に破壊的変更が入ってしまうとバージョンを固定するしか無くなってしまう。

勿論SSGだから、そもそもHugo本体をアップデートする必要も別にないんじゃない？ってのはそう(生成物が踏み台にされるような変な脆弱性が無いなら)

私は現状v0.93.3で、0.6xくらいの頃から今と同じHugoテーマ(hugo-future-imperfect-slim。1年くらい前にArchived)を使っていた。

(手元のバージョンがこれなのであって、buildspec.yml直すの忘れたまんまだから0.7xとかそっちでは動いてるんですけど……)

んで久しぶりに記事書くつもりになった所でなんとなくHugoをchocoからアップデートしたら見事ビルドできなくなり、泣く泣くインストールし直すなどした所だ。

これは初めての経験ではなく、以前は上に書いたテーマではなくそのfork元であるhugo-future-imperfectを使わせてもらっていたがこれも同じくメンテナンスされないままになった結果Hugo本体の更新についていけなくなった。

前回はありがたいことにForkしてメンテナンスを続けてくれる方が居たおかげで同じようなデザインを使い続けられた。今回もForkを軽く漁ったが、Hugo v0.112以上に対応したForkが見つかった。

とはいえ、久しぶりに以前経験したものと同じ状況になったことで、自分でメンテナンスできないものを使い続けるのか？という思いも出てきている。

更新されたコードを読んだ限りは私にもなんとかなりそうな部類ではあるが、とはいえそれを毎度毎度ある程度の頻度でHugoのリリースノートを読みつつテーマをメンテナンスするなんて事ができるのか？本当に？

webにもgolangにも明るくないのにそれやんのもなぁ。

明るくないだけじゃなく個人的にはあまり興味がない分野でもあり、また挑戦しては諦めてる分野だからというのもある。

物が多すぎて何から手をつけるのか分からなすぎる。自分で作って試せばいいじゃんって話でもあるけど、一体何から？という想像すら及ばない。

また今のテキストエディタとターミナルかgitクライアントを起動してファイル作って記事書いてビルドして中身チェックしてからcommitとpushして……っていうフローも中々記事を書く障壁になっている気もする。やっぱ雑にブラウザとかから書いてぱぱっと公開できた方が楽。(あと今はHugo本体のアップデートで変わってるっぽいけど、テキスト以外のファイルの取扱がめんどくさい)

とはいえCMS(使うならWPかなぁ)を用意すると今度は運用をもうちょっとちゃんとやらなきゃならないというのと、コストがかなり増える事が予想される。(現状200~400円/月くらい)

移行の障壁はそれだけではなく、記事を移す作業(私の持ってる技術だと自動化はまぁまぁ大変そう)やパーマリンクを引き継ぐための設定をちまちま行うなど、中々に時間がかかりそうだ。

という感じで、どうせSSGなんだから今のまんまで良いんじゃない vs WP立ててCDN通してDBバックアップ定期的にやって良い具合のつよつよインフラ試しに作ってみない？金も時間も高いけど

なんていう対立が自分の中で発生しているわけだ。
