+++
author = "aries"
categories = ["tech"]
tags = ["AWS", "Hugo"]
date = "2019-02-02"
description = "WordPressã‹ã‚‰Hugoã«ç§»è¡Œ"
#featured = ""
#featuredalt = ""
featuredpath = "date"
linktitle = ""
title = "ConoHa+WordPressã‹ã‚‰AWS+Hugoã¸ç§»è¡Œ"
type = "post"
toc=false
+++

Ariesã§ã™ã€‚
ä»Šå›ã¯æ–°ã—ãã“ã®ã‚µã‚¤ãƒˆã‚’ç«‹ã¡ä¸Šã’ãŸã®ã§ã€ãã‚Œã«é–¢ã™ã‚‹è¨˜äº‹ã§ã™ã€‚

ä½•ã‚’ä½¿ã£ã¦ã©ã‚“ãªæ§‹æˆã«ã—ãŸã‹ã‚’çŸ¥ã‚ŠãŸã„å ´åˆã¯çµŒç·¯ã¯èª­ã¾ãªãã¦å¤§ä¸ˆå¤«ã§ã™ã€‚è‡ªåˆ†èªã‚Šã§ã™ã®ã§ã€‚

{{< figure src="/img/2019/02/com3d2_pic1.png" title="ç‰¹ã«æ„å‘³ã®ãªã„COM3D2ã‚¹ã‚¯ã‚·ãƒ§" >}}

## æ§‹æˆ

é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿Hugoã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚

ãƒ­ãƒ¼ã‚«ãƒ«ã«ã¦Markdownã§è¨˜äº‹ã‚’ä½œæˆã—ã€CodeCommitã¸pushã€ãã®å¾ŒCodeBuildã§buildã¨S3ã¸ã®deployã€ãŠã‚ˆã³CloudFrontã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‰Šé™¤ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚

```
CodeCommit -> CodeBuild -> S3 -> CloudFront <- User, Route53
```

ã¨ã„ã£ãŸæ„Ÿã˜ã§ã™ã€‚

ãªãŠãƒ†ãƒ¼ãƒã¯[hugo-future-imperfect]ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

è‰²ãªã©æ°—ã«é£Ÿã‚ãªã„éƒ¨åˆ†ãŒã„ãã¤ã‹ã‚ã‚‹ã®ã§ä»Šå¾Œã—ã°ã‚‰ãã¯ã‚µã‚¤ãƒˆã®è¦‹ãŸç›®å®‰å®šã—ãªã„ã‹ã‚‚ã€‚


æ¤œç´¢ã™ã‚‹ã¨å¤šãã®è§£èª¬è¨˜äº‹ãŒã‚ã‚Šã¾ã™ã®ã§ã€ãã¡ã‚‰ã‚’å‚ç…§ã™ã‚Œã°ã‹ãªã‚Šãƒãƒƒãƒ”ãƒ¼ã«ãªã‚Œã‚‹ã‹ã¨ã€‚

CodeCommitã‚‚Codebuildã‚‚ã€CloudFrontã‚‚Hugoã‚‚ç§ã¯å…¨ã¦åˆã‚ã¦è§¦ã‚‹ã®ã§ã“ã®ç’°å¢ƒã‚’æ•´ãˆã‚‹ã¾ã§ã«å¤§ä½“2æ—¥ã»ã©ã‹ã‹ã‚Šã¾ã—ãŸã€‚ã¨ã¯ã„ãˆä»•äº‹ã®åˆé–“ã‚’ç¸«ã£ã¦ãªã®ã§ã€å®Ÿéš›ã¯10æ™‚é–“ç¨‹åº¦ï¼Ÿ

## çµŒç·¯

ä¸‰å¹´ã»ã©å‰ã‹ã‚‰ConoHaã®å˜ä¸€VPSã§ã€ãƒ–ãƒ­ã‚°ç”¨ã«WordPress(Kusanagi)ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

å®Œå…¨ãªã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³æ§‹æˆã§ã€ãƒ¡ãƒ‡ã‚£ã‚¢ã‚„DBã€Webã‚µãƒ¼ãƒã‚‚å…¨éƒ¨1å°ã®VPSã§è³„ã£ã¦ã„ã¾ã—ãŸã€‚

ã“ã®æ§‹æˆã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦ã¯ã€

- å„ç¨®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒå–ã‚Šã¥ã‚‰ã„
- å¯ç”¨æ€§ãŒä½ã„
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ãªã©æ°—ã«ã™ã‚‹éƒ¨åˆ†ãŒå¤šã„
- ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒé¢å€’
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£çš„ã«ç‹™ã‚ã‚Œã‚„ã™ã„

ã¨ã„ã£ãŸç‚¹ãŒä¸Šã’ã‚‰ã‚Œã¾ã™ã€‚

Kusanagiã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‘¨ã‚Šã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ãªã©ãŒã„ã„æ„Ÿã˜ã§ã€WordPressã«ã‚ã‚ŠãŒã¡ãªã‚¹ãƒ”ãƒ¼ãƒ‰ä¸è¶³ã‚’æ„Ÿã˜ã‚‹ã“ã¨ã¯ã»ã¼ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€ãã‚Œã§ã‚‚å­¦ç”Ÿæ™‚ä»£ã«é›‘ã«ç«‹ã¦ãŸå¾®å¦™ãªæ§‹æˆã®ãƒ–ãƒ­ã‚°ã‚’å»¶ã€…ã¨ä½¿ã„ç¶šã‘ã‚‹ã®ã‚‚ãªãâ€¦â€¦ã¨æ€ã„ãªãŒã‚‰ã—ã°ã‚‰ãåˆ©ç”¨ã‚’ç¶šã‘ã¦ãŠã‚Šã¾ã—ãŸã€‚

ã—ã‹ã—ã€2018å¹´ã®å¤ã«ãµã¨æ€ã„ç«‹ã¡AWSã§Mastodonã®ãŠä¸€äººæ§˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç«‹ã¦ã¦çŠ¶æ³ãŒä¸€å¤‰ã—ã¾ã—ãŸã€‚

**æœˆã€…ã®ã‚µãƒ¼ãƒä»£ğŸ’°ãŒä¸­ã€…ã‚­ãƒ„ã„â€¦â€¦**

ãã‚Œã‚‚ã“ã‚Œã‚‚Mastodonã‚’ãŠä¸€äººæ§˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã ã¨ã„ã†ã®ã«ã‚ã–ã‚ã–RDSã‚„ã‚‰ElasticCacheã‚„ã‚‰ã¡ã‚‡ã£ã¨ãŠé«˜ã„ã‚‚ã®ã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ã‚‰ãªã®ã§ã™ãŒã€ãã‚Œã¯ã¨ã‚‚ã‹ãã€‚

æ—§ãƒ–ãƒ­ã‚°ã¯ConoHaã®1GBãƒ—ãƒ©ãƒ³ã§ã®å¥‘ç´„ã§è¿½åŠ ãƒ‡ã‚£ã‚¹ã‚¯ç„¡ã—ã§ã™ã®ã§ã€å¤§ä½“æœˆé¡1000å††ã»ã©ã§ã™ã€‚

ã“ã®æ™‚ç‚¹ã§ã™ã§ã«ãƒ–ãƒ­ã‚°ã®æ›´æ–°ãŒåœæ»æ°—å‘³ã§ã‚ã£ãŸã“ã¨ã«åŠ ãˆã€ä¸Šè¨˜ã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’å«ã‚ã¦è€ƒãˆãŸçµæœä½•ã‹ã—ã‚‰åˆ¥ã®ã‚‚ã®ã«ç§»è¡Œã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã¨S3, CloudFrontã‚’çµ„ã¿åˆã‚ã›ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®å¯¾æŠ—æ¡ˆã¨ã—ã¦ã¯ã€

- EC2, RDSã‚’ä½¿ã£ãŸWordPress
- Lightsailã¨ãã®ãƒãƒãƒ¼ã‚¸ãƒ‰DBã§ã®WordPress

ã¨ã„ã£ãŸæ¡ˆã‚‚ã‚ã‚Šã¾ã—ãŸãŒã€1æ¡ˆã¯é‡‘é¡ãŒé«˜ã™ãã‚‹ã€2æ¡ˆã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã¸å…¬é–‹ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€ã¨ã„ã†ç†ç”±ã‹ã‚‰å´ä¸‹ã™ã‚‹ã“ã¨ã«ã€‚


ã•ã¦ã€ä»Šåº¦ã“ãã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’å¢—ã‚„ã—ã¦ã„ã‹ã­ã°â€¦â€¦ã€‚
